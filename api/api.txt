import flask
from flask import request, jsonify

app = flask.Flask(__name__)
app.config["DEBUG"] = True

palavras = ['uva','abacate', 'brotas', 'mamao', 'manga', 'pindamonhangaba', 'gato', 'alemanha']

@app.route('/', methods=['GET'])
def home():
    return "<h1>Voel counter website</h1><p>This site is a prototype API for a  jow interview. It must receive a json file with words and return other json with those same words as keys and the numbers of voels as values.</p>"


@app.route('/api/v1/resources/palavras/all', methods=['GET'])
def list_array():
    return jsonify(palavras)


@app.route('/api/v1/resources/palavras', methods=['GET'])
def order_array():
    
    # input words right down
    palavras = ['uva','abacate', 'brotas', 'mamao', 'manga', 'pindamonhangaba', 'gato', 'alemanha']
    voels, vs, count = ['a', 'e', 'i', 'o', 'u'], [], 0

    # iterate array to count voels
    for w in palavras:
        if type(w) is not str:
            raise TypeError('A função só aceita parametros do tipo string. Altere todos os elementos em "api.txt" para tipo string.')
        else:
            for l in w:
                if l in voels:
                    count += 1  # count voels
            vs.append(count)
            count = 0

    palavras = list(zip(palavras, vs))  # zip lists

    palavras = {x: y for x, y in sorted(palavras, key=lambda item: item[1])}  # order

    return jsonify(palavras)

app.run()