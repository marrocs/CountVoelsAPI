import flask
from flask import request, jsonify

app = flask.Flask(__name__)
app.config["DEBUG"] = True

palavras = ['uva','abacate', 'brotas', 'mamao', 'manga', 'pindamonhangaba', 'gato', 'alemanha']

@app.route('/', methods=['GET'])
def home():
    return "<h1>Voel counter website</h1><p>This site is a prototype API for a  jow interview. It must receive a json file with words and return other json with those same words as keys and the numbers of voels as values.</p>"


@app.route('/api/v1/resources/palavras/all', methods=['GET'])
def list_array():
    return jsonify(palavras)


@app.route('/api/v1/resources/palavras', methods=['GET'])
def order_array():
    
    # input words right down
    palavras = ['uva','abacate', 'brotas', 'mamao', 'manga', 'pindamonhangaba', 'gato', 'alemanha']
    voels, vs = ['a', 'e', 'i', 'o', 'u'], []
    count = 0

    # iterate array to count voels
    for w in palavras:
        for l in w:
            if l in voels:
                count += 1  # count voels
        vs.append(count)
        count = 0

    palavras = list(zip(palavras, vs))  # zip lists

    palavras_dict = {palavras[x][0]: palavras[x][1] for x in range(len(palavras))}

    palavras_dict = {k: v for k, v in sorted(palavras_dict.items(), key=lambda x: x[1])}

    return jsonify(palavras_dict)

app.run()